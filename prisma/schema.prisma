// This is your Prisma schema file
// Learn more at: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Admin kullanıcılar
model Admin {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  sifre     String
  ad        String
  aktif     Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Kategoriler
model Kategori {
  id        Int      @id @default(autoincrement())
  ad        String
  slug      String   @unique
  aciklama  String?
  resim     String?
  aktif     Boolean  @default(true)
  sira      Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  haberler  Haber[]
}

// Yazarlar
model Yazar {
  id        Int      @id @default(autoincrement())
  ad        String
  slug      String   @unique
  email     String?
  biyografi String?
  avatar    String?
  twitter   String?
  linkedin  String?
  website   String?
  aktif     Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  haberler  Haber[]
}

// Etiketler
model Etiket {
  id        Int          @id @default(autoincrement())
  ad        String
  slug      String       @unique
  createdAt DateTime     @default(now())
  haberler  HaberEtiket[]
}

// Haberler
model Haber {
  id            Int           @id @default(autoincrement())
  baslik        String
  slug          String        @unique
  spot          String?
  icerik        String        @db.Text
  resim         String?
  resimAlt      String?
  video         String?
  durum         String        @default("taslak")
  manset        Boolean       @default(false)
  sonDakika     Boolean       @default(false)
  goruntulenme  Int           @default(0)
  yayinTarihi   DateTime      @default(now())
  seoBaslik     String?
  seoAciklama   String?
  seoKeywords   String?
  kaynak        String?
  kaynakUrl     String?
  canonicalUrl  String?
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  
  kategoriId    Int?
  kategori      Kategori?     @relation(fields: [kategoriId], references: [id])
  
  yazarId       Int?
  yazar         Yazar?        @relation(fields: [yazarId], references: [id])
  
  etiketler     HaberEtiket[]
  yorumlar      Yorum[]
}

// Haber-Etiket ilişki tablosu
model HaberEtiket {
  haberId   Int
  etiketId  Int
  haber     Haber   @relation(fields: [haberId], references: [id], onDelete: Cascade)
  etiket    Etiket  @relation(fields: [etiketId], references: [id], onDelete: Cascade)
  
  @@id([haberId, etiketId])
}

// Yorumlar
model Yorum {
  id          Int      @id @default(autoincrement())
  ad          String
  email       String
  icerik      String   @db.Text
  onaylandi   Boolean  @default(false)
  createdAt   DateTime @default(now())
  
  haberId     Int
  haber       Haber    @relation(fields: [haberId], references: [id], onDelete: Cascade)
}

// Slider
model Slider {
  id          Int      @id @default(autoincrement())
  baslik      String
  aciklama    String?
  resim       String
  link        String?
  sira        Int      @default(0)
  aktif       Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Nöbetçi Eczaneler
model NobetciEczane {
  id          Int      @id @default(autoincrement())
  ad          String
  adres       String
  telefon     String?
  il          String   @default("Eskisehir")
  ilce        String?
  tarih       DateTime @default(now()) // Nöbet tarihi
  aktif       Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Reklamlar/İlanlar
model Reklam {
  id          Int      @id @default(autoincrement())
  ad          String
  konum       String   // header, sidebar, footer, content
  icerik      String   @db.Text // HTML/Script kodu
  aktif       Boolean  @default(true)
  baslangic   DateTime?
  bitis       DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

// Site ayarları
model SiteAyarlari {
  id              Int      @id @default(autoincrement())
  siteAdi         String   @default("Haber Sitesi")
  siteUrl         String   @default("http://localhost:3000")
  siteAciklama    String?
  logoUrl         String?
  logoAltUrl      String?  // Alternatif logo (footer için)
  faviconUrl      String?
  footerText      String?
  copyrightText   String?
  sosyalFacebook  String?
  sosyalTwitter   String?
  sosyalInstagram String?
  sosyalYoutube   String?
  sosyalTiktok    String?
  sosyalLinkedin  String?
  analyticsId     String?
  headerKod       String?  @db.Text // Custom header script (Google Analytics vb.)
  footerKod       String?  @db.Text // Custom footer script
  iletisimEmail   String?
  iletisimTelefon String?
  iletisimAdres   String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}
